<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Manage Products</title>
  <link rel="stylesheet" href="/css/produk.css" /> <!-- perbaiki href jadi hardcoded agar CSS jalan -->
</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar">
    <h2>üéÇ Admin Panel</h2>
    <ul>
      <li><a href="/admin/dashboard">üè† Dashboard</a></li>
      <li><a href="/products" class="active">üç∞ Products</a></li>
      <li><a href="/admin/orders">üìã Orders</a></li>
      <li><a href="/admin/users">üë• Users</a></li>
      <li><a href="/logout">üîô Logout</a></li>
    </ul>
  </div>

  <!-- Konten utama -->
  <div class="main-content">
    <h1>Manage Products</h1>

    <!-- Submenu kategori -->
    <div>
      <a href="/products/category/celebrationcake">Kue Ulang Tahun</a>
      <a href="/products/category/dessert">Dessert Individual</a>
      <a href="/products/category/cookie">Kue Kering</a>
      <a href="/products/category/classiccake">Kue Klasik</a>
    </div>

    <!-- Tombol tambah produk -->
    <div>
      <button onclick="openModal()">Add Product</button>
    </div>

    <!-- Modal form (popup) -->
    <div id="addModal" style="display:none;">
      <div>
        <span onclick="closeModal()">√ó</span>
        <h2>Add New Product</h2>
        <form method="post" action="/products/add" enctype="multipart/form-data">
          <label>Product Name</label>
          <input type="text" name="name" required />

          <label>Category</label>
          <select name="category" required>
            <option value="celebrationcake">Kue Ulang Tahun</option>
            <option value="cookie">Kue Kering</option>
            <option value="dessert">Dessert</option>
            <option value="classiccake">Kue Klasik</option>
          </select>

          <label>Price</label>
          <input type="number" name="price" required />

          <label>Description</label>
          <input type="text" name="description" />

          <label>Stock</label>
          <input type="number" name="stock" />

          <label>Image</label>
          <input type="file" name="image" />

          <div id="optionalField"></div>

          <button type="submit">Submit</button>
        </form>
      </div>
    </div>

    <script>
      function openModal() {
        document.getElementById('addModal').style.display = 'flex';
      }

      function closeModal() {
        document.getElementById('addModal').style.display = 'none';
      }

      document.addEventListener('DOMContentLoaded', function () {
        const categorySelect = document.querySelector('select[name="category"]');
        const optionalField = document.getElementById('optionalField');

        categorySelect.addEventListener('change', function () {
          optionalField.innerHTML = '';
          if (this.value === 'dessert' || this.value === 'classiccake') {
            optionalField.innerHTML = '<label>Varian</label><input type="text" name="varian" />';
          } else if (this.value === 'cookie' || this.value === 'celebrationcake') {
            optionalField.innerHTML = '<label>Ukuran</label><input type="text" name="ukuran" />';
          }
        });
      });
    </script>

  </div>
</body>
</html>
